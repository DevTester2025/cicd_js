<nz-spin [nzSpinning]="loading" [nzSize]="'large'">
  <form nz-form [formGroup]="sgForm">
    <div class="row">
      <div class="col s12 m6">
        <nz-form-item>
          <nz-form-label
            [nzSm]="24"
            [nzXs]="12"
            nzRequired
            nzFor="securitygroupname"
            >Name</nz-form-label
          >
          <nz-form-control [nzSm]="24" [nzXs]="12">
            <nz-input-group>
              <input
                id="securitygroupname"
                formControlName="securitygroupname"
                nz-input
                type="text"
                placeholder="Name"
              />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col s12 m6">
        <nz-form-item>
          <nz-form-label [nzSm]="24" [nzXs]="12" nzFor="alisecuritygroupid"
            >Alibaba Security Group ID</nz-form-label
          >
          <nz-form-control [nzSm]="24" [nzXs]="12">
            <nz-input-group>
              <input
                id="alisecuritygroupid"
                formControlName="alisecuritygroupid"
                nz-input
                type="text"
                placeholder="Alibaba Security Group ID"
              />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col s12 m6">
        <nz-form-item>
          <nz-form-label [nzSm]="24" [nzXs]="12" nzRequired nzFor="vpcid"
            >Select VPC</nz-form-label
          >
          <nz-form-control [nzSm]="24" [nzXs]="12">
            <nz-select
              nzShowSearch
              nzAllowClear
              id="vpcid"
              placeholder="Select VPC"
              nzPlaceHolder="Select VPC"
              formControlName="vpcid"
            >
              <nz-option
                *ngFor="let v of vpcList"
                [nzLabel]="v.vpcname"
                [nzValue]="v.vpcid"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col s12 m6">
        <nz-form-item>
          <nz-form-label [nzSm]="24" [nzXs]="12" nzRequired nzFor="region"
            >Select Region</nz-form-label
          >
          <nz-form-control [nzSm]="24" [nzXs]="12">
            <nz-select
              nzShowSearch
              nzAllowClear
              id="region"
              placeholder="Select Region"
              nzPlaceHolder="Select Region"
              formControlName="region"
            >
              <nz-option
                *ngFor="let v of regionList"
                [nzLabel]="v.keyname"
                [nzValue]="v.keyvalue"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div class="col s12 m6">
        <nz-form-item>
          <nz-form-label [nzSm]="24" [nzXs]="12" nzFor="notes"
            >Notes</nz-form-label
          >
          <nz-form-control [nzSm]="24" [nzXs]="12">
            <nz-input-group>
              <textarea
                id="notes"
                formControlName="notes"
                placeholder="Notes"
                type="text"
                nz-input
              ></textarea>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div class="right-align mt-1">
      <button (click)="addRule()" nz-button nzType="primary">Add Rule</button>
    </div>
    <div formArrayName="alisgrules">
      <div
        *ngFor="let rules of getFormArray('alisgrules').controls; let i = index"
      >
        <div [formGroupName]="i" class="row security-type">
          <div class="col s12 m3">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzXs]="12"
                nzRequired
                nzFor="direction"
                >Rule Direction</nz-form-label
              >
              <nz-form-control [nzSm]="24" [nzXs]="12">
                <nz-select
                  nzShowSearch
                  nzAllowClear
                  id="direction"
                  placeholder="Select Rule Direction"
                  nzPlaceHolder="Security Rule Direction"
                  formControlName="direction"
                >
                  <nz-option
                    *ngFor="let v of ruleDirectionList"
                    [nzLabel]="v.keyname"
                    [nzValue]="v.keyvalue"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div class="col s12 m3">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzXs]="12"
                nzRequired
                nzFor="ipprotocol"
                >Protocol</nz-form-label
              >
              <nz-form-control [nzSm]="24" [nzXs]="12">
                <nz-select
                  nzShowSearch
                  nzAllowClear
                  id="ipprotocol"
                  placeholder="Select Protocol"
                  nzPlaceHolder="Select Protocol"
                  formControlName="ipprotocol"
                >
                  <nz-option
                    *ngFor="let v of protocolList"
                    [nzLabel]="v.keyname"
                    [nzValue]="v.keyvalue"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div class="col s12 m3">
            <nz-form-item>
              <nz-form-label
                [nzSm]="24"
                [nzXs]="12"
                nzFor="portrange"
                nzRequired
                >Port</nz-form-label
              >
              <nz-form-control [nzSm]="24" [nzXs]="12">
                <nz-input-group>
                  <input
                    nzPlaceHolder="Port"
                    id="portrange"
                    formControlName="portrange"
                    nz-input
                    type="text"
                  />
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div class="col s12 m3">
            <nz-form-item>
              <nz-form-label [nzSm]="24" [nzXs]="12" nzFor="priority" nzRequired
                >Priority</nz-form-label
              >
              <nz-form-control [nzSm]="22" [nzXs]="12">
                <nz-input-group>
                  <nz-input-number
                    id="priority"
                    formControlName="priority"
                    nz-input
                    type="number"
                    [nzMin]="1"
                    [nzMax]="100"
                  ></nz-input-number>
                </nz-input-group>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div class="s12 delete-buttons">
            <i
              (click)="removeRule(i)"
              class="anticon hover-pointer delete-icon anticon-delete"
            ></i>
          </div>
        </div>
      </div>
    </div>
  </form>
</nz-spin>
<div class="row right">
  <div class="col s12 md4">
    <button
      [disabled]="disabled"
      (click)="saveOrUpdate(sgForm.value)"
      class="save-button"
      nz-button
      nzType="primary"
    >
      {{ buttonText }}
    </button>
  </div>
</div>
